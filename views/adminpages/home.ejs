<%- include("./partials/header") %>

<div class="w-full min-h-screen flex flex-col px-6 sm:px-10 py-12 gap-10 bg-gradient-to-br from-gray-50 to-gray-100">

    <!-- Summary Cards -->
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
        <div class="bg-white shadow-lg rounded-xl p-6 text-center transform hover:scale-105 transition-transform duration-300">
            <h3 class="text-lg sm:text-xl font-semibold text-gray-700">Total Users</h3>
            <p class="text-3xl sm:text-4xl font-bold text-blue-600 mt-2"><%= users.length %></p>
        </div>
        <div class="bg-white shadow-lg rounded-xl p-6 text-center transform hover:scale-105 transition-transform duration-300">
            <h3 class="text-lg sm:text-xl font-semibold text-gray-700">Active Orders</h3>
            <p class="text-3xl sm:text-4xl font-bold text-green-600 mt-2"><%= Notcompleted.length %></p>
        </div>
        <div class="bg-white shadow-lg rounded-xl p-6 text-center transform hover:scale-105 transition-transform duration-300">
            <h3 class="text-lg sm:text-xl font-semibold text-gray-700">Completed Orders</h3>
            <p class="text-3xl sm:text-4xl font-bold text-green-600 mt-2"><%= orders.length - Notcompleted.length %></p>
        </div>
    </div>

    <!-- Recent Orders -->
    <div class="bg-white shadow-lg rounded-xl p-6 sm:p-8">
        <h2 class="text-2xl sm:text-3xl font-bold text-gray-800 mb-6">Recent Orders</h2>
        <% if(orders.length === 0) { %>
            <p class="text-gray-500 text-lg">No orders placed yet.</p>
        <% } else { %>
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-gray-200 text-gray-700">
                            <th class="p-4 border-b font-semibold">Order ID</th>
                            <th class="p-4 border-b font-semibold">User</th>
                            <th class="p-4 border-b font-semibold">Total Cost</th>
                            <th class="p-4 border-b font-semibold">Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% orders.forEach(order => { %>
                            <tr class="hover:bg-gray-50 transition-colors duration-200">
                                <td class="p-4 border-b text-gray-600"><%= order._id %></td>
                                <td class="p-4 border-b text-gray-600"><%= order.user ? order.user.email : "N/A" %></td>
                                <td class="p-4 border-b text-green-600 font-medium">â‚¹ <%= order.totalCost %></td>
                                <td class="p-4 border-b text-gray-600">
                                    <%= order.createdAt ? order.createdAt.toDateString() : "N/A" %>
                                </td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            </div>
        <% } %>
    </div>

</div>

<%- include("../partials/footer") %>